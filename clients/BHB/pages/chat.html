---
layout: default
title: BHB Chat
permalink: /BHB/chat.html
---

<!-- Load styles -->
<link rel="stylesheet" href="/assets/css/debug.css">
<link rel="stylesheet" href="/assets/css/layout.css">
<link rel="stylesheet" href="/assets/css/chat.css">
<link rel="stylesheet" href="/assets/css/buttons.css">

<div class="page-wrapper debug-container">
  <!-- Header -->
  {% include header.html %}

  <div class="main-content debug-container">
    <!-- Sidebar - 20% width -->
    <div class="debug-visible" style="width: 20%; min-width: 200px;">
      {% include sidebar.html %}
    </div>

    <!-- Main area - 80% width -->
    <div class="debug-container" style="width: 80%;">
      <!-- Welcome section -->
      <div class="section active" id="welcome-section">
        {% include welcome_affirmations.html %}
      </div>

      <!-- Chat section -->
      <div class="section" id="chat-section">
        {% include chat.html %}
      </div>

      <!-- Tools section -->
      <div class="section" id="tools-section">
        <h2>Tools & Export</h2>
        <p>Coming soon...</p>
      </div>
    </div>
  </div>

  <!-- Footer area - switches between playbar and chatbar -->
  <div class="debug-visible">
    <div id="playbar-container">
      {% include playbar.html %}
    </div>
    <div id="chatbar-container" style="display: none;">
      {% include chatbar.html %}
    </div>
  </div>
</div>

<!-- Load scripts -->
<script src="/assets/js/auth.js"></script>
<script src="/assets/js/navigation.js"></script>
<script src="/assets/js/chat.js"></script>

<script>
// Initialize on load
document.addEventListener('DOMContentLoaded', function() {
  // Set initial state
  showSection(0);
  
  // Initialize thread ID from local storage if exists
  window.threadId = localStorage.getItem('threadId') || null;
  console.log('Session initialized:', window.threadId ? `Using thread ${window.threadId}` : 'New session');
});

function showSection(index) {
  // Update sections
  document.querySelectorAll('.section').forEach((section, i) => {
    section.classList.toggle('active', i === index);
  });
  
  // Update sidebar buttons
  document.querySelectorAll('#sidebar button').forEach((button, i) => {
    button.classList.toggle('active', i === index);
  });

  // Toggle appropriate footer
  const playbarContainer = document.getElementById('playbar-container');
  const chatbarContainer = document.getElementById('chatbar-container');
  
  if (index === 1) { // Chat section
    playbarContainer.style.display = 'none';
    chatbarContainer.style.display = 'block';
  } else {
    playbarContainer.style.display = 'block';
    chatbarContainer.style.display = 'none';
  }
}
</script> 